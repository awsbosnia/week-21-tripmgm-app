{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../shared/language/translate.directive\";\nexport let PasswordStrengthBarComponent = /*#__PURE__*/(() => {\n  class PasswordStrengthBarComponent {\n    constructor(renderer, elementRef) {\n      this.renderer = renderer;\n      this.elementRef = elementRef;\n      this.colors = ['#F00', '#F90', '#FF0', '#9F0', '#0F0'];\n    }\n\n    measureStrength(p) {\n      let force = 0;\n      const regex = /[$-/:-?{-~!\"^_`[\\]]/g; // \"\n\n      const lowerLetters = /[a-z]+/.test(p);\n      const upperLetters = /[A-Z]+/.test(p);\n      const numbers = /[0-9]+/.test(p);\n      const symbols = regex.test(p);\n      const flags = [lowerLetters, upperLetters, numbers, symbols];\n      const passedMatches = flags.filter(isMatchedFlag => isMatchedFlag === true).length;\n      force += 2 * p.length + (p.length >= 10 ? 1 : 0);\n      force += passedMatches * 10; // penalty (short password)\n\n      force = p.length <= 6 ? Math.min(force, 10) : force; // penalty (poor variety of characters)\n\n      force = passedMatches === 1 ? Math.min(force, 10) : force;\n      force = passedMatches === 2 ? Math.min(force, 20) : force;\n      force = passedMatches === 3 ? Math.min(force, 40) : force;\n      return force;\n    }\n\n    getColor(s) {\n      let idx = 0;\n\n      if (s > 10) {\n        if (s <= 20) {\n          idx = 1;\n        } else if (s <= 30) {\n          idx = 2;\n        } else if (s <= 40) {\n          idx = 3;\n        } else {\n          idx = 4;\n        }\n      }\n\n      return {\n        idx: idx + 1,\n        color: this.colors[idx]\n      };\n    }\n\n    set passwordToCheck(password) {\n      if (password) {\n        const c = this.getColor(this.measureStrength(password));\n        const element = this.elementRef.nativeElement;\n\n        if (element.className) {\n          this.renderer.removeClass(element, element.className);\n        }\n\n        const lis = element.getElementsByTagName('li');\n\n        for (let i = 0; i < lis.length; i++) {\n          if (i < c.idx) {\n            this.renderer.setStyle(lis[i], 'backgroundColor', c.color);\n          } else {\n            this.renderer.setStyle(lis[i], 'backgroundColor', '#DDD');\n          }\n        }\n      }\n    }\n\n  }\n\n  PasswordStrengthBarComponent.ɵfac = function PasswordStrengthBarComponent_Factory(t) {\n    return new (t || PasswordStrengthBarComponent)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef));\n  };\n\n  PasswordStrengthBarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PasswordStrengthBarComponent,\n    selectors: [[\"jhi-password-strength-bar\"]],\n    inputs: {\n      passwordToCheck: \"passwordToCheck\"\n    },\n    decls: 19,\n    vars: 0,\n    consts: [[\"id\", \"strength\"], [\"jhiTranslate\", \"global.messages.validate.newpassword.strength\"], [\"id\", \"strengthBar\"], [1, \"point\"]],\n    template: function PasswordStrengthBarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtext(1, \"\\n  \");\n        i0.ɵɵelementStart(2, \"small\", 1);\n        i0.ɵɵtext(3, \"Password strength:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(4, \"\\n  \");\n        i0.ɵɵelementStart(5, \"ul\", 2);\n        i0.ɵɵtext(6, \"\\n    \");\n        i0.ɵɵelement(7, \"li\", 3);\n        i0.ɵɵtext(8, \"\\n    \");\n        i0.ɵɵelement(9, \"li\", 3);\n        i0.ɵɵtext(10, \"\\n    \");\n        i0.ɵɵelement(11, \"li\", 3);\n        i0.ɵɵtext(12, \"\\n    \");\n        i0.ɵɵelement(13, \"li\", 3);\n        i0.ɵɵtext(14, \"\\n    \");\n        i0.ɵɵelement(15, \"li\", 3);\n        i0.ɵɵtext(16, \"\\n  \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(17, \"\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(18, \"\\n\");\n      }\n    },\n    directives: [i1.TranslateDirective],\n    styles: [\"ul#strength[_ngcontent-%COMP%]{display:inline;list-style:none;margin:0 0 0 15px;padding:0;vertical-align:2px}.point[_ngcontent-%COMP%]{background:#ddd;border-radius:2px;display:inline-block;height:5px;margin-right:1px;width:20px}.point[_ngcontent-%COMP%]:last-child{margin:0!important}\"]\n  });\n  return PasswordStrengthBarComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}