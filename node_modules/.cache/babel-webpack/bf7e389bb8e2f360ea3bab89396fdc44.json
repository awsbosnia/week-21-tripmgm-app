{"ast":null,"code":"import { SecurityContext } from '@angular/core';\nimport { translationNotFoundMessage } from 'app/config/translation.config';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/platform-browser\";\nimport * as i2 from \"@ngx-translate/core\";\nexport let AlertService = /*#__PURE__*/(() => {\n  class AlertService {\n    constructor(sanitizer, ngZone, translateService) {\n      this.sanitizer = sanitizer;\n      this.ngZone = ngZone;\n      this.translateService = translateService;\n      this.timeout = 5000;\n      this.toast = false;\n      this.position = 'top right'; // unique id for each alert. Starts from 0.\n\n      this.alertId = 0;\n      this.alerts = [];\n    }\n\n    clear() {\n      this.alerts = [];\n    }\n\n    get() {\n      return this.alerts;\n    }\n    /**\n     * Adds alert to alerts array and returns added alert.\n     * @param alert      Alert to add. If `timeout`, `toast` or `position` is missing then applying default value.\n     *                   If `translateKey` is available then it's translation else `message` is used for showing.\n     * @param extAlerts  If missing then adding `alert` to `AlertService` internal array and alerts can be retrieved by `get()`.\n     *                   Else adding `alert` to `extAlerts`.\n     * @returns  Added alert\n     */\n\n\n    addAlert(alert, extAlerts) {\n      var _a, _b, _c, _d, _e;\n\n      alert.id = this.alertId++;\n\n      if (alert.translationKey) {\n        const translatedMessage = this.translateService.instant(alert.translationKey, alert.translationParams); // if translation key exists\n\n        if (translatedMessage !== `${translationNotFoundMessage}[${alert.translationKey}]`) {\n          alert.message = translatedMessage;\n        } else if (!alert.message) {\n          alert.message = alert.translationKey;\n        }\n      }\n\n      alert.message = (_b = this.sanitizer.sanitize(SecurityContext.HTML, (_a = alert.message) !== null && _a !== void 0 ? _a : '')) !== null && _b !== void 0 ? _b : '';\n      alert.timeout = (_c = alert.timeout) !== null && _c !== void 0 ? _c : this.timeout;\n      alert.toast = (_d = alert.toast) !== null && _d !== void 0 ? _d : this.toast;\n      alert.position = (_e = alert.position) !== null && _e !== void 0 ? _e : this.position;\n\n      alert.close = alertsArray => this.closeAlert(alert.id, alertsArray);\n\n      (extAlerts !== null && extAlerts !== void 0 ? extAlerts : this.alerts).push(alert);\n\n      if (alert.timeout > 0) {\n        // Workaround protractor waiting for setTimeout.\n        // Reference https://www.protractortest.org/#/timeouts\n        this.ngZone.runOutsideAngular(() => {\n          setTimeout(() => {\n            this.ngZone.run(() => {\n              this.closeAlert(alert.id, extAlerts !== null && extAlerts !== void 0 ? extAlerts : this.alerts);\n            });\n          }, alert.timeout);\n        });\n      }\n\n      return alert;\n    }\n\n    closeAlert(alertId, extAlerts) {\n      const alerts = extAlerts !== null && extAlerts !== void 0 ? extAlerts : this.alerts;\n      const alertIndex = alerts.map(alert => alert.id).indexOf(alertId); // if found alert then remove\n\n      if (alertIndex >= 0) {\n        alerts.splice(alertIndex, 1);\n      }\n    }\n\n  }\n\n  AlertService.ɵfac = function AlertService_Factory(t) {\n    return new (t || AlertService)(i0.ɵɵinject(i1.DomSanitizer), i0.ɵɵinject(i0.NgZone), i0.ɵɵinject(i2.TranslateService));\n  };\n\n  AlertService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AlertService,\n    factory: AlertService.ɵfac,\n    providedIn: 'root'\n  });\n  return AlertService;\n})();","map":null,"metadata":{},"sourceType":"module"}